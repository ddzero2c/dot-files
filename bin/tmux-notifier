#!/bin/bash
msg="${1:-Done}"
tmux=/opt/homebrew/bin/tmux

if [ -n "$TMUX" ]; then
  session=$(tmux display-message -t "$TMUX_PANE" -p '#S')
  target=$(tmux display-message -t "$TMUX_PANE" -p '#S:#I.#P')
  client=$(tmux display-message -t "$TMUX_PANE" -p '#{client_tty}')

  terminal-notifier \
    -title "TMUX($session)" \
    -message "$msg" \
    -contentImage ~/assets/claude.svg \
    -activate com.mitchellh.ghostty \
    -execute "$tmux switch-client -c $client -t $target"
else
  terminal-notifier \
    -title "Terminal" \
    -message "$msg" \
    -contentImage ~/assets/claude.svg \
    -activate com.mitchellh.ghostty
fi
